{% extends "core/layouts/main.twig" %}

{% block body %}
<p>
    <a class="btn btn-default" href="{{ path_for('plugins-repository') }}">Install Plugins via Repository</a>
</p>
<form action="{{ path_for('plugins-save') }}" method="post">
    <div class="panel panel-default">
        <div class="panel-heading">Plugins Home</div>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th width="350">Author</th>
                        <th width="200">Enable</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pluginListItem in pluginsList %}
                    <tr>
                        <td>
                            <span title="ID: {{ pluginListItem.plugin.getId() }}">{{ pluginListItem.plugin.getName() }}</span>
                            {% if pluginListItem.plugin.hasDescription() %}
                            <button
                                class="btn btn-default btn-xs"
                                role="button"
                                data-toggle="collapse"
                                href="#plugin-description-{{ loop.index }}"
                                aria-expanded="false"
                                aria-controls="plugin-description-{{ loop.index }}"
                            >Description</button>
                            <div class="collapse" id="plugin-description-{{ loop.index }}" style="margin-top: 10px;">
                                {{ pluginListItem.plugin.getDescription() | raw }}
                            </div>
                            {% endif %}
                        </td>
                        <td>
                            {% if pluginListItem.plugin.getAuthorName() %}
                                {% if pluginListItem.plugin.getAuthorSiteUrl() %}
                                    <a href="{{ pluginListItem.plugin.getAuthorSite() }}" target="_blank">{{ pluginListItem.plugin.getAuthorName() }}</a>
                                {% else %}
                                    {{ pluginListItem.plugin.getAuthorName() }}
                                {% endif %}
                                {% if pluginListItem.plugin.getAuthorEmail() %}
                                    &lt;<a href="mailto:{{ pluginListItem.plugin.getAuthorEmail() }}">{{ pluginListItem.plugin.getAuthorEmail() }}</a>&gt;
                                {% endif %}
                            {% else %}
                                &ndash;
                            {% endif %}
                        </td>
                        <td>
                            <label
                                class="btn btn-sm btn-{{ pluginListItem.isEnabled ? 'success': 'default' }} {{ pluginListItem.isCore ? 'disabled' }}"
                                title="{{ pluginListItem.isCore ? 'Plugin can\'t be disabled because it is core plugin.' }}"
                                data-toggle="tooltip"
                            >
                                <input
                                    type="checkbox"
                                    name="plugins[]"
                                    class="btn btn-default btn-sm"
                                    {{ pluginListItem.isCore ? 'disabled' }}
                                    value="{{ pluginListItem.plugin.getId() }}"
                                    {{ pluginListItem.isEnabled ? 'checked' }}
                                    style="margin-top: 0;"
                                >
                                Enable
                            </label>
                            {% if pluginListItem.isCore %}
                                <input type="hidden" name="plugins[]" value="{{ pluginListItem.plugin.getId() }}">
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="panel-body">
            <button
                class="btn btn-success"
                type="submit"
            >Save</button>
        </div>
    </div>
</form>
{% endblock %}
